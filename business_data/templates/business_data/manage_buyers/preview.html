{% extends "core/_base.html" %}

{% block title %}Import Buyers {% endblock title %}


{% block push_css %}
<!--Datatable -->
<link href="https://cdn.datatables.net/v/bs5/dt-2.2.1/r-3.0.3/datatables.min.css" rel="stylesheet">
{% endblock push_css %}


{% block content %}
  <!--begin::Header-->
  {% include 'core/layouts/content_header.html' with page_name="Import Buyers From CSV" only%}
  <!--end::Header-->
    <!--begin::App Content-->
  <div class="app-content">
    <!--begin::Container-->
    <div class="container-fluid">
      <!--begin::Row-->
      <div class="">
        <!--begin::Col-->
        <!--begin::Form Validation-->
        <div class="card card-info card-outline mb-4">
          <!--begin::Header-->
          <div class="card-header">
            <div class="card-title">Preview Buyers Information</div>
          </div>
          
          <!--end::Header-->
          <div class="p-3">
            <div class="pb-3">
              <h4>Data sheet Info</h4>
              <ul class="list-group">
                <li class="list-group-item"><a href="{{file_info.url}}">Download Sheet</a></li>
                <li class="list-group-item">File Name : {{file_info.name}}</li>
                <li class="list-group-item">Uploaded at: {{file_info.uploaded_at}}</li>
              </ul>
            </div>
            <div class="py-2">
              <div class="alert alert-warning" role="alert">
                Matched data has been highlighted. Please cancel the operation and change or update the data from your datasheet if you don't want to upload those duplicate data. 
              </div>
            </div>
              <form  method="post">
                {% csrf_token %}

                <table id="buyers" class="table table-striped" style="width:100%">
                  <thead>
                      <tr>
                          <th>Sr. No</th>
                          <th>Date </th>
                          <th>Company Name</th>
                          <th>Organization Type</th>
                          <th>Brand</th>
                          <th>Category (Apparel or Textile) </th>
                          <th>Department </th>
                          <th>Buyer Name </th>
                          <th>Designation</th>
                          <th>COO</th>
                          <th>Buyer Email ID</th>
                          <th>WhatsApp Number</th>
                          <th>Phone Number</th>
                          <th>Company Website</th>
                          <th>Payment Term</th>
                          <th>Fabric Reference dealing with</th>
                          <th>Mailing Address</th>
                          <th>Visiting address</th>
                          <th>LinkedIn Profile Link</th>
                          <th>Remarks</th>
                          <th>Concern FE Representative</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for item in buyers %}
                      <tr>
                          <td>{{forloop.counter}}</td>
                            <td>
                            {% if item.duplicates.date %}
                              <mark>{{ item.date }}</mark>
                            {% else %}
                              {{ item.date }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.company_name %}
                              <mark>{{ item.company_name }}</mark>
                            {% else %}
                              {{ item.company_name }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.organization_type %}
                              <mark>{{ item.organization_type }}</mark>
                            {% else %}
                              {{ item.organization_type }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.brand %}
                              <mark>{{ item.brand }}</mark>
                            {% else %}
                              {{ item.brand }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.category %}
                              <mark>{{ item.category }}</mark>
                            {% else %}
                              {{ item.category }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.department %}
                              <mark>{{ item.department }}</mark>
                            {% else %}
                              {{ item.department }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.buyer_name %}
                              <mark>{{ item.buyer_name }}</mark>
                            {% else %}
                              {{ item.buyer_name }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.designation %}
                              <mark>{{ item.designation }}</mark>
                            {% else %}
                              {{ item.designation }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.country_of_origin %}
                              <mark>{{ item.country_of_origin }}</mark>
                            {% else %}
                              {{ item.country_of_origin }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.buyer_email_id %}
                              <mark>{{ item.buyer_email_id }}</mark>
                            {% else %}
                              {{ item.buyer_email_id }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.whatsapp_number %}
                              <mark>{{ item.whatsapp_number }}</mark>
                            {% else %}
                              {{ item.whatsapp_number }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.phone_number %}
                              <mark>{{ item.phone_number }}</mark>
                            {% else %}
                              {{ item.phone_number }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.website %}
                              <mark>{{ item.website }}</mark>
                            {% else %}
                              {{ item.website }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.payment_term %}
                              <mark>{{ item.payment_term }}</mark>
                            {% else %}
                              {{ item.payment_term }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.fabric_reference %}
                              <mark>{{ item.fabric_reference }}</mark>
                            {% else %}
                              {{ item.fabric_reference }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.mailing_address %}
                              <mark>{{ item.mailing_address }}</mark>
                            {% else %}
                              {{ item.mailing_address }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.visiting_address %}
                              <mark>{{ item.visiting_address }}</mark>
                            {% else %}
                              {{ item.visiting_address }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.linkedin_profile %}
                              <mark>{{ item.linkedin_profile }}</mark>
                            {% else %}
                              {{ item.linkedin_profile }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.remarks %}
                              <mark>{{ item.remarks }}</mark>
                            {% else %}
                              {{ item.remarks }}
                            {% endif %}
                            </td>
                            <td>
                            {% if item.duplicates.concern_fe_rep %}
                              <mark>{{ item.concern_fe_rep }}</mark>
                            {% else %}
                              {{ item.concern_fe_rep }}
                            {% endif %}
                            </td>
                          {% comment %} <td > {% if item.duplicates.organization_type %}class="highlight-duplicate"{% endif %} {{item.organization_type}}</td>
                          <td > {% if item.duplicates.brand %}class="highlight-duplicate"{% endif %} {{item.brand}}</td>
                          <td class="highlight-duplicate">{{item.category}}</td>
                          <td>{{item.department}}</td>
                          <td>{{item.buyer_name}}</td>
                          <td>{{item.designation}}</td>
                          <td>{{item.coo}}</td>
                          <td>{{item.buyer_email_id}}</td>
                          <td>{{item.whatsapp_number}}</td>
                          <td>{{item.phone_number}}</td>
                          <td>{{item.company_website}}</td>
                          <td>{{item.payment_term}}</td>
                          <td>{{item.fabric_reference_dealing_with}}</td>
                          <td>{{item.mailing_address}}</td>
                          <td>{{item.visiting_address}}</td>
                          <td>{{item.linkedin_profile_link}}</td>
                          <td>{{item.remarks}}</td>
                          <td>{{item.concern_fe_representative}}</td> {% endcomment %}
                          {% comment %} <td></td> {% endcomment %}
                          {% comment %} <input type="hidden" name="recipient_ids" value="{{ item.temp_id }}"> {% endcomment %}
                      </tr>
                      {% endfor %}
                  </tbody>
                  <tfoot>
                      <tr>
                          <th>Sr. No</th>
                          <th>Date </th>
                          <th>Company Name</th>
                          <th>Organization Type</th>
                          <th>Brand</th>
                          <th>Category (Apparel or Textile) </th>
                          <th>Department </th>
                          <th>Buyer Name </th>
                          <th>Designation</th>
                          <th>COO</th>
                          <th>Buyer Email ID</th>
                          <th>WhatsApp Number</th>
                          <th>Phone Number</th>
                          <th>Company Website</th>
                          <th>Payment Term</th>
                          <th>Fabric Reference dealing with</th>
                          <th>Mailing Address</th>
                          <th>Visiting address</th>
                          <th>LinkedIn Profile Link</th>
                          <th>Remarks</th>
                          <th>Concern FE Representative</th>
                          {% comment %} <th>Action</th> {% endcomment %}
                      </tr>
                  </tfoot>
                </table>

                <!--begin::Form-->
                <div class="text-center">
                  <button name="action" value="confirm" class="btn btn-success" type="submit">Confirm and Save</button>
                  <button name="action" value="cancel" class="btn btn-secondary" type="submit">Cancel</button>
                </div>
              </form>

                
          </div>
        </div>

        <!--end::Col-->
      </div>
      
      <!-- /.row (main row) -->
    </div>
    <!--end::Container-->
  </div>
  <!--end::App Content-->


<!--begin:: Toaster alert -->
{% include 'core/components/alert/toaster.html' %}
<!--end:: Toaster alert-->
{% endblock content %}

{% block push_scripts %}

<!-- Datatable-->
<script src="https://cdn.datatables.net/v/bs5/dt-2.2.1/r-3.0.3/datatables.min.js"></script>


<script>
    $(document).ready(function () {
      // toast alert
      $('.toast').toast({
        delay: 1000*20,
      }).toast('show')

      $('#buyers').DataTable( {
          responsive: true
      } );

      
    });
</script>
<!--end::JavaScript-->
{% endblock push_scripts %}
